name: CI

on:
  push:
    branches:
    - master

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Set up JDK 1.9
      uses: actions/setup-java@v1
      with:
        java-version: 1.9
    - name: Build with Gradle
      run: ./gradlew check
    #- name: Build and Publish
    #  env:
    #    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      # The GITHUB_REF tag comes in the format 'refs/tags/xxx'.
      # So if we split on '/' and take the 3rd value, we can get the release name.
      # run: |
      # NEW_VERSION=$(echo "${GITHUB_REF}" | cut -d "/" -f3)
      # echo "New version: ${NEW_VERSION}"
      # echo "Github username: ${GITHUB_ACTOR}"
      # ./gradlew -Pversion=${NEW_VERSION} publish
    #  run: ./gradlew -Pversion=2.8.21-SNAPSHOT publish