name: Create a github + sentry releases based on a pr label

on:
  pull_request:
    types: closed

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: version bump
        uses: cbrwizard/semver-release-action@feature/optional_default_version_local_docker_image
        with:
          default_version: patch
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        id: version_bump
      - name: sentry release
        uses: cbrwizard/sentry-release-github-action@master
        with:
          release: ${{ steps.version_bump.outputs.tag }}
        env:
          SENTRY_ORG: veryfyodor
          SENTRY_PROJECT: cbrwizard
          SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
