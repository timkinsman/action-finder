name: init tests

on:
  push:
    paths:
      - 'obspyDMT'
      - '.github/workflows/init_tests.yml'
        

jobs:
  run_script:

    runs-on: ubuntu-18.04
    container:
      image: python

    steps:
    - uses: actions/checkout@v1
    - name: Install dependencies
      run: |-
        conda config --add channels conda-forge
        conda create -n obspy python=3.7
        conda activate obspy
        conda install obspy
        pip install pytest
    - name: Run tests
      run: |-
        pytest .
