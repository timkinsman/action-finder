name: Deploy to hosting
 
on:
  push:
    branches: [ master ]
 
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout git repository
      uses: actions/checkout@v2
      # with:
      #   submodules: true

    - name: Synchronize git repository
      uses: houseofmaldorne/rsync-deploy@v2.0
      env:
        DEPLOY_KEY: ${{ secrets.REMOTE_SSH_KEY }}
        REMOTE_USER: ${{ secrets.REMOTE_USER }}
        REMOTE_SERVER: ${{ secrets.REMOTE_SERVER }}
        REMOTE_PORT: ${{ secrets.REMOTE_PORT }}
        REMOTE_PATH: ${{ secrets.REMOTE_PATH }}
        FOLDER: "./"
        EXCLUDE_LIST: ".github/workflows/exclude.txt"

    - name: Finishing sync
      run: echo Sync finished!
