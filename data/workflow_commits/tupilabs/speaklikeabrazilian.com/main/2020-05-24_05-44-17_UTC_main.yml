name: GitHub Pages
on:
  push:
    branches:
      - master
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: SCM
        uses: actions/checkout@v2
      - name: Build
        uses: kinow/jekyll-builder-for-github-pages-action@e5ba93bb7fc7a86b7e1e8d02ff035fb1985ef27c
        env:
          JEKYLL_UID: 0
          JEKYLL_GID: 0
          ALGOLIA_KEY: "${{ secrets.TEST_KEY }}"
          DEBUG: "true"
        with:
          pre_build_commands: |
            gem install bundler
            gem install nokogiri
            bundle install && true
          secret_gh_pages_api_token: ${{ secrets.ACCESS_TOKEN }}
          gh_pages_publishing_source: gh-pages
